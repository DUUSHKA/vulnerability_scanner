import requests
import sys
import argparse
from vulnerabilities import sql_injection, xss, port_scanner

def scan_url(target_url, output_file):
    print(f"Scanning {target_url} for vulnerabilities...")
    
    with open(output_file, 'w') as report:
        report.write(f"Scanning report for {target_url}\n\n")
        
        sql_report = sql_injection.scan(target_url)
        xss_report = xss.scan(target_url)
        port_report = port_scanner.scan(target_url)
        
        report.write("[SQL Injection]\n")
        report.write(sql_report + "\n")
        
        report.write("[XSS]\n")
        report.write(xss_report + "\n")
        
        report.write("[Open Ports]\n")
        report.write(port_report + "\n")
    
    print(f"Scan complete. Report saved to {output_file}")

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description='Simple Web Vulnerability Scanner')
    parser.add_argument('url', type=str, help='Target URL to scan')
    parser.add_argument('--output', type=str, default='report.txt', help='Output file for the scan report')
    
    args = parser.parse_args()
    scan_url(args.url, args.output)
